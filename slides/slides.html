<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<meta name="generator" content="Slide Show (S9); see slideshow.rubyforge.org">
<meta name="author" content="Jay Farschman">

<title>Automate Your Puppet Boilerplate</title>

<!-- Don't alter this, CSSS needs it to work -->
<link href="slideshow.css" rel="stylesheet" />

<!-- Theme-specific styles go here (themes can be reused in multiple talks) -->
<link href="theme.css" rel="stylesheet" />

<!-- Talk-specific styles go here -->
<!-- GB: changed fixed name (talk.css) to variable -->
<link href="slides.css" rel="stylesheet" />
	
</head>
<!-- GB: todo: add duration header/property -->
<body data-duration="45">

<header id="intro" class="slide">
	<h1>Automate Your Puppet Boilerplate</h1>
	<p class="attribution">By Jay Farschman</p>
</header>

	<section class="slide" id="navigation">
		<h2>CSSS Navigation</h2>
		<p>Only through keyboard for now :(</p>
		<ul>
			<li>→ or ↓ to advance to the next slide or incrementally displayed item</li>
			<li>← or ↑ to go to the previous slide or incrementally displayed item</li>
			<li>Ctrl* + → or Ctrl* + ↓ to jump to the next slide</li>
			<li>Ctrl* + ← or Ctrl* + ↑ to jump to the previous slide</li>
			<li>Home to go to the first slide, End to go to the last</li>
			<li>Ctrl* + G to jump to an arbitrary slide (by slide number or identifier)</li>
		</ul>
		<p>* Ctrl or Shift actually. Only Shift works in Opera.</p>
	</section>

	<section class="slide">
		<h2>CSSS Navigation Cont.</h2>
		
		<p>Thumbnail view</p>
		<ul>
		  <li>Press Ctrl+H (or Shift+H if you're in Opera) now.</li>
		  <li>Press Ctrl+Shift+H to see all slides (warning: can be slow!)</li>
		</ul>
		
		<p>Presenter view</p>
		<ul>
		  <li>This slide has presenter notes. They are only visible in presenter view (Ctrl+P or Shift+P).</li>
		</ul>
		<p class="presenter-notes">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>		
		
	</section>

<!-- note: assumes no header (breaking slides w/ SLIDE directive) -->

  <section class="slide">
    <!-- === begin markdown block ===

      generated by markdown/1.2.0 on Ruby 2.0.0 (2014-05-08) [universal.x86_64-darwin14]
                on 2015-01-12 15:08:09 -0700 with Markdown engine kramdown (1.5.0)
                  using options {}
  -->

<!-- _S9SLIDE_ -->
<h2 id="automate-your-puppet-boilerplate">Automate Your Puppet Boilerplate</h2>

<pre><code>Puppetlabs have put alot of effort into helping us 
build standardized modules including an overhaul of
the http://forge.puppetlabs.com

Part of that is encouraging the grassroots puppet
developers to follow a set of standards that can
best be described at a boilerplate
</code></pre>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="defined-boilerplate">Defined: Boilerplate</h2>

<pre><code>A boilerplate is a unit of writing that can be reused 
over and over without change.
</code></pre>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="i-got-this-its-bash">I got this, it’s BASH</h2>

<p>Frankly, there are lots of steps that just don’t seem important
to everyone so they generally aren’t all followed.</p>

<pre><code>$ mkdir -p newmodulename/{manifests,files,templates,spec}
$ cd newmodulename
$ touch manifests/{init,install,config,service}.pp
$ mkdir -p spec/{classes,define,acceptance}
$ touch spec/classes/modulename_spec.rb
$ touch spec/classes/modulename_{install,config,service}_spec.rb
$ touch .gitignore CHANGELOG LICENSE .fixtures.yml README.markdown 
$ touch .tavis.yml metadata.json GEMfile Rakefile
</code></pre>

<p>But now my files are all empty, maybe I should have copied some of this
from a module that is perfect?</p>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="hmmm-maybe-not">Hmmm, Maybe not…</h2>

<ul>
  <li>Will your whole team know what to do?</li>
  <li>Will you remember how to do it in 4 months?</li>
  <li>Will the inconsistencies bother you?</li>
  <li>What about evolving best practices?</li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="module-generate---default">Module Generate - Default</h2>

<pre><code>&gt; puppet module generate jfarschman-default

We need to create a metadata.json file for this module.  Please answer the
following questions; if the question is not applicable to this module, feel free
to leave it blank.

Puppet uses Semantic Versioning (semver.org) to version modules.
What version is this module?  [1.0.0]
--&gt; 

Who wrote this module?  [jfarschman]
--&gt; 

What license does this module code fall under?  [Apache 2.0]
--&gt; 

How would you describe this module in a single sentence?
--&gt; This is the default module for testing module generation.

etc... 
</code></pre>


  </section>

  <section class="slide">
    <!-- _S9SLIDE_  commandline -->

<pre><code> Where is this module's source code repository?
 --&gt; https://github.com/jfarschman/jfarschman-default

 Where can others go to learn more about this module?  [https://github.com/jfarschman/jfarschman-default]
 --&gt; 

 Where can others go to file issues about this module?  [https://github.com/jfarschman/jfarschman-default/issues]
 --&gt; 

 ----------------------------------------
 {
   "name": "jfarschman-default",
   "version": "1.0.0",
   "author": "jfarschman",
   "summary": "This is the default module for testing module generation.",
   "license": "Apache 2.0",
   "source": "https://github.com/jfarschman/jfarschman-default",
   "project_page": "https://github.com/jfarschman/jfarschman-default",
   "issues_url": "https://github.com/jfarschman/jfarschman-default/issues",
   "dependencies": [
     {"name":"puppetlabs-stdlib","version_requirement":"&gt;= 1.0.0"}
   ]
 }
 ----------------------------------------

 About to generate this metadata; continue? [n/Y]
 --&gt;
</code></pre>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="so-why-dont-we-like-the-default">So, Why don’t we like the default?</h2>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="answer-it-has-evoloved">Answer: It has evoloved.</h2>

<ul>
  <li>Incorporating Tests (rspec-puppet)</li>
  <li>Style Compliant (puppet-lint)</li>
  <li>Input Validation (stdlib module)</li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="rspec-puppet---testing">rspec-puppet - Testing</h2>

<p>rspec-puppet provide the rspec-puppet-init binary to help 
you getting started with. Simply run rspec-puppet-init at
the root of your module and a bunch of directory will be 
created under your spec/ folder.</p>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="puppet-lint---style">Puppet-lint - Style</h2>

<p>The PuppetLabs Style Guide provides some best practices
for style to make your code readable to others.  Every
community needs style practices so that we can share and
get assistance.</p>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="input-validation">Input Validation</h2>
<p>Strange user inputs can make troubleshooting difficult.
puppetlabs/stdlib can provide data validation:</p>

<ul>
  <li>validate_array</li>
  <li>validate_bool</li>
  <li>validate_hash</li>
  <li>validate_string</li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="lets-checkout-gareths-module">Let’s Checkout Gareth’s Module</h2>
<p>Puppet <code>generate</code> will look in your home directory 
<code>~/.puppet/var/puppet-module/skeleton</code> to find any modifications.</p>

<pre><code>git clone https://github.com/garethr/puppet-module-skeleton
cd puppet-module-skeleton
find skeleton -type f | git checkout-index --stdin \
   --force --prefix="$HOME/.puppet/var/puppet-module/" --
</code></pre>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="module-generate---skeleton">Module Generate - Skeleton</h2>

<pre><code>&gt; puppet module generate ping-skeleton

- Now it reads from the ~/.puppet/var/puppet-module/skeleton 
dir which we can modify as needed.

- Warning: If you work as root the skeleton path is different 
and will pull from /etc/puppet/modules/
</code></pre>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="but-i-dont-like-whats-generated">But I don’t like what’s generated</h2>

<ul>
  <li>Add any file you require into new modules</li>
  <li>Templates are named with an .erb extension</li>
  <li>Templates drop the .erb extenstion when placed</li>
</ul>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="example-file-initpperb">Example File init.pp.erb</h2>

<p>The power of Ruby templates</p>

<!-- begin code{:name=>"init.pp.erb"} -->
<div class="code"><pre class="brush: ruby toolbar: false gutter: true"># == Class: &lt;%= metadata.name %&gt;
#
# Full description of class &lt;%= metadata.name %&gt; here.
#
# === Parameters
#
# Document parameters here.
#
# [*sample_parameter*]
#   Explanation of what this parameter affects and what it defaults to.
#   e.g. &quot;Specify one or more upstream ntp servers as an array.&quot;
#
[snip]
.....
# Copyright &lt;%= Time.now.year %&gt; Your name here, unless otherwise noted.
#
class &lt;%= metadata.name %&gt; {

}
</pre></div>
<div class="codeurl">init.pp.erb</div>
<!-- end code -->



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="what-variables-are-available">What variables are available?</h2>

<pre><code>meta-data.full_module_name
meta-data.version
meta-data.author
meta-data.summary
meta-data.license
meta-data.source
meta-data.project_page
meta-data.issues_url
</code></pre>

<p>These are recognizeable from the questions you answered when running
puppet module generate ping-modulename</p>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="as-and-example---documenting-modules">As and Example - Documenting Modules</h2>

<pre><code>Will have an example here of how to do modify README.markdown
</code></pre>



  </section>

  <section class="slide">
    <!-- _S9SLIDE_ -->
<h2 id="continued">Continued…</h2>

<p>or is it the end?</p>
<!-- === end markdown block === -->

  </section>



<!--
<footer class="slide">
	<h2>Thank you!</h2>
	<p>Closing remarks</p>
</footer>
-->

<script src="slideshow.js"></script>

<!-- Make sure the reference to -prefix-free works -->
<script src="prefixfree.min.js"></script>

<!-- Uncomment the plugins you need
<script src="plugins/css-edit.js"></script>
<script src="plugins/css-snippets.js"></script>
<script src="plugins/css-controls.js"></script>
-->
<script>var slideshow = new SlideShow();

</script>
	
</body>
</html>